<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å“¡å·¥è³‡æ–™ç®¡ç†ç³»çµ±</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Microsoft JhengHei', 'PingFang TC', 'Apple LiGothic Medium', 'Roboto', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function EmployeeSurveyCRUD() {
            const [employees, setEmployees] = useState([]);
            const [currentView, setCurrentView] = useState('list');
            const [selectedEmployee, setSelectedEmployee] = useState(null);
            const [searchTerm, setSearchTerm] = useState('');
            const [formData, setFormData] = useState({
                employeeId: '',
                name: '',
                department: '',
                position: '',
                gender: '',
                birthDate: '',
                hireDate: '',
                maritalStatus: '',
                children: [],
                nationality: '',
                education: '',
                certification: '',
                certificationOptions: [],
                certificationCustom: '',
                graduationMajor: '',
                graduationMajorOther: '',
                languageSkills: [],
                fixedLanguageSkills: {},
                travelWillingness: '',
                travelLocations: [],
                customTravelLocations: [],
                workLocation: '',
                healthInfo: '',
                healthInfoOptions: [],
                healthInfoCustom: '',
                mobile: '',
                email: '',
                address: '',
                residenceAddress: '',
                emergencyContactName: '',
                emergencyContactRelation: '',
                emergencyContactPhone: '',
                emergencyContactBackupPhone: '',
                lifeGoals: '',
                careerGoals: '',
                careerDevelopment: '',
                achievementProject: '',
                privacyConsent: false
            });

            useEffect(() => {
                const savedData = JSON.parse(localStorage.getItem('employeeData') || '[]');
                setEmployees(savedData);
            }, []);

            const saveToStorage = (data) => {
                localStorage.setItem('employeeData', JSON.stringify(data));
            };

            const resetForm = () => {
                setFormData({
                    employeeId: '',
                    name: '',
                    department: '',
                    position: '',
                    gender: '',
                    birthDate: '',
                    hireDate: '',
                    maritalStatus: '',
                    children: [],
                    nationality: '',
                    education: '',
                    certification: '',
                    certificationOptions: [],
                    certificationCustom: '',
                    graduationMajor: '',
                    graduationMajorOther: '',
                    languageSkills: [],
                    fixedLanguageSkills: {},
                    travelWillingness: '',
                    travelLocations: [],
                    customTravelLocations: [],
                    workLocation: '',
                    healthInfo: '',
                    healthInfoOptions: [],
                    healthInfoCustom: '',
                    mobile: '',
                    email: '',
                    address: '',
                    residenceAddress: '',
                    emergencyContactName: '',
                    emergencyContactRelation: '',
                    emergencyContactPhone: '',
                    emergencyContactBackupPhone: '',
                    lifeGoals: '',
                    careerGoals: '',
                    careerDevelopment: '',
                    achievementProject: '',
                    privacyConsent: false
                });
            };

            // æ—¥æœŸæ ¼å¼é©—è­‰å‡½æ•¸
            const validateDateFormat = (date) => {
                if (!date) return false;
                
                // æ”¯æ´ YYYY-MM-DD æ ¼å¼ï¼ˆä¾†è‡ªæ—¥æœŸé¸æ“‡å™¨ï¼‰
                if (date.includes('-')) {
                    const dateRegex = /^\d{4}-\d{2}-\d{2}$/;
                    if (!dateRegex.test(date)) return false;
                    
                    const [year, month, day] = date.split('-').map(num => parseInt(num));
                    
                    if (year < 1900 || year > new Date().getFullYear()) return false;
                    if (month < 1 || month > 12) return false;
                    if (day < 1 || day > 31) return false;
                    
                    // æª¢æŸ¥æœˆä»½å¤©æ•¸
                    const daysInMonth = new Date(year, month, 0).getDate();
                    return day <= daysInMonth;
                }
                
                // æ”¯æ´ YYYYMMDD æ ¼å¼
                const regex = /^\d{8}$/;
                if (!regex.test(date)) return false;
                
                const year = parseInt(date.substring(0, 4));
                const month = parseInt(date.substring(4, 6));
                const day = parseInt(date.substring(6, 8));
                
                if (year < 1900 || year > new Date().getFullYear()) return false;
                if (month < 1 || month > 12) return false;
                if (day < 1 || day > 31) return false;
                
                // æª¢æŸ¥æœˆä»½å¤©æ•¸
                const daysInMonth = new Date(year, month, 0).getDate();
                return day <= daysInMonth;
            };

            // æ—¥æœŸæ ¼å¼è½‰æ›å‡½æ•¸
            const convertDateToYYYYMMDD = (date) => {
                if (!date) return '';
                if (date.includes('-')) {
                    // YYYY-MM-DD è½‰ YYYYMMDD
                    return date.replace(/-/g, '');
                }
                return date; // å·²ç¶“æ˜¯ YYYYMMDD æ ¼å¼
            };

            const convertDateToYYYY_MM_DD = (date) => {
                if (!date) return '';
                if (date.length === 8 && !date.includes('-')) {
                    // YYYYMMDD è½‰ YYYY-MM-DD
                    return `${date.substring(0, 4)}-${date.substring(4, 6)}-${date.substring(6, 8)}`;
                }
                return date; // å·²ç¶“æ˜¯ YYYY-MM-DD æ ¼å¼
            };

            // è¡¨å–®é©—è­‰å‡½æ•¸
            const validateForm = () => {
                const requiredFields = {
                    employeeId: 'å“¡ç·¨',
                    name: 'å§“å',
                    department: 'éƒ¨é–€',
                    position: 'è·å‹™',
                    gender: 'æ€§åˆ¥',
                    birthDate: 'å‡ºç”Ÿæ—¥æœŸ',
                    hireDate: 'åˆ°è·æ—¥',
                    maritalStatus: 'å©šå§»ç‹€æ³',
                    nationality: 'èº«ä»½åˆ¥',
                    education: 'å­¸æ­·',
                    graduationMajor: 'ç•¢æ¥­ç§‘ç³»',
                    travelWillingness: 'åœ‹å¤–æ´¾é£æ„é¡˜',
                    workLocation: 'ç›®å‰å·¥ä½œåœ°é»',
                    careerDevelopment: 'è·æ¶¯ç™¼å±•æ„å‘',
                    careerGoals: 'å€‹äººçš„è·æ¶¯ç›®æ¨™',
                    lifeGoals: 'å€‹äººçš„è·æ¶¯ç›®æ¨™',
                    achievementProject: 'è«‹åˆ†äº«æ‚¨å·¥ä½œä¸Šæœ€æœ‰æˆå°±æ„Ÿçš„å·¥ä½œè¡¨ç¾(ä¸åƒ…é™æ–¼ç›®å‰ç›®å‰å…¬å¸)',
                    mobile: 'æ‰‹æ©Ÿé›»è©±',
                    email: 'é›»å­éƒµä»¶',
                    address: 'é€šè¨Šåœ°å€',
                    residenceAddress: 'æˆ¶ç±åœ°å€',
                    emergencyContactName: 'ç·Šæ€¥è¯çµ¡äººå§“å',
                    emergencyContactRelation: 'ç·Šæ€¥è¯çµ¡äººé—œä¿‚',
                    emergencyContactPhone: 'ç·Šæ€¥è¯çµ¡äººé›»è©±'
                };

                // æª¢æŸ¥å¿…å¡«æ¬„ä½
                for (const [field, label] of Object.entries(requiredFields)) {
                    if (!formData[field] || formData[field].toString().trim() === '') {
                        alert(`è«‹å¡«å¯«å¿…å¡«æ¬„ä½ï¼š${label}`);
                        return false;
                    }
                }

                // æª¢æŸ¥å€‹è³‡åŒæ„
                if (!formData.privacyConsent) {
                    alert('è«‹åŒæ„å€‹è³‡ä½¿ç”¨æ¢æ¬¾');
                    return false;
                }

                // æª¢æŸ¥æ—¥æœŸæ ¼å¼
                if (!validateDateFormat(formData.birthDate)) {
                    alert('å‡ºç”Ÿæ—¥æœŸæ ¼å¼éŒ¯èª¤ï¼Œè«‹é¸æ“‡æ­£ç¢ºçš„æ—¥æœŸ');
                    return false;
                }

                if (!validateDateFormat(formData.hireDate)) {
                    alert('åˆ°è·æ—¥æ ¼å¼éŒ¯èª¤ï¼Œè«‹é¸æ“‡æ­£ç¢ºçš„æ—¥æœŸ');
                    return false;
                }

                // æª¢æŸ¥å…¶ä»–ç§‘ç³»æ˜¯å¦å¡«å¯«
                if (formData.graduationMajor === 'å…¶ä»–' && (!formData.graduationMajorOther || formData.graduationMajorOther.trim() === '')) {
                    alert('è«‹å¡«å¯«å…·é«”çš„ç•¢æ¥­ç§‘ç³»');
                    return false;
                }

                // æª¢æŸ¥è­‰ç…§æ˜¯å¦æœ‰é¸æ“‡
                if ((!formData.certificationOptions || formData.certificationOptions.length === 0) && 
                    (!formData.certificationCustom || formData.certificationCustom.trim() === '')) {
                    alert('è«‹é¸æ“‡è­‰ç…§é¡å‹æˆ–å¡«å¯«å…¶ä»–è­‰ç…§èªªæ˜');
                    return false;
                }

                // æª¢æŸ¥èªè¨€èƒ½åŠ›æ˜¯å¦æœ‰å¡«å¯«
                const hasFixedLanguageSkill = formData.fixedLanguageSkills && 
                    Object.keys(formData.fixedLanguageSkills).length > 0 &&
                    Object.values(formData.fixedLanguageSkills).some(lang => 
                        lang && Object.values(lang).some(skill => skill && skill.trim() !== '')
                    );
                const hasCustomLanguageSkill = formData.languageSkills && 
                    formData.languageSkills.length > 0 &&
                    formData.languageSkills.some(skill => 
                        skill.language && skill.language.trim() !== '' &&
                        (skill.listening || skill.speaking || skill.reading || skill.writing)
                    );
                
                if (!hasFixedLanguageSkill && !hasCustomLanguageSkill) {
                    alert('è«‹è‡³å°‘å¡«å¯«ä¸€é …èªè¨€èƒ½åŠ›ï¼ˆä¸­æ–‡ã€è‹±æ–‡æˆ–å…¶ä»–èªè¨€ï¼‰');
                    return false;
                }

                return true;
            };

            const handleCreate = () => {
                if (!validateForm()) {
                    return;
                }
                
                if (employees.some(emp => emp.employeeId === formData.employeeId)) {
                    alert('å“¡ç·¨å·²å­˜åœ¨ï¼Œè«‹ä½¿ç”¨å…¶ä»–å“¡ç·¨');
                    return;
                }

                // è½‰æ›æ—¥æœŸæ ¼å¼ç‚º YYYYMMDD å¾Œå„²å­˜
                const formDataToSave = {
                    ...formData,
                    birthDate: convertDateToYYYYMMDD(formData.birthDate),
                    hireDate: convertDateToYYYYMMDD(formData.hireDate),
                    id: Date.now().toString()
                };
                const newEmployee = formDataToSave;
                const updatedEmployees = [...employees, newEmployee];
                setEmployees(updatedEmployees);
                saveToStorage(updatedEmployees);
                resetForm();
                setCurrentView('list');
                alert('å“¡å·¥è³‡æ–™æ–°å¢æˆåŠŸï¼');
            };

            const handleUpdate = () => {
                if (!validateForm()) {
                    return;
                }

                // è½‰æ›æ—¥æœŸæ ¼å¼ç‚º YYYYMMDD å¾Œæ›´æ–°
                const formDataToSave = {
                    ...formData,
                    birthDate: convertDateToYYYYMMDD(formData.birthDate),
                    hireDate: convertDateToYYYYMMDD(formData.hireDate),
                    id: selectedEmployee.id
                };
                const updatedEmployees = employees.map(emp => 
                    emp.id === selectedEmployee.id ? formDataToSave : emp
                );
                setEmployees(updatedEmployees);
                saveToStorage(updatedEmployees);
                resetForm();
                setCurrentView('list');
                setSelectedEmployee(null);
                alert('å“¡å·¥è³‡æ–™æ›´æ–°æˆåŠŸï¼');
            };

            const handleDelete = (employee) => {
                if (window.confirm(`ç¢ºå®šè¦åˆªé™¤ ${employee.name} çš„è³‡æ–™å—ï¼Ÿ`)) {
                    const updatedEmployees = employees.filter(emp => emp.id !== employee.id);
                    setEmployees(updatedEmployees);
                    saveToStorage(updatedEmployees);
                    alert('å“¡å·¥è³‡æ–™åˆªé™¤æˆåŠŸï¼');
                }
            };

            const handleEdit = (employee) => {
                setSelectedEmployee(employee);
                setFormData({
                    ...employee,
                    // è½‰æ›æ—¥æœŸæ ¼å¼ç‚º YYYY-MM-DD ä¾›æ—¥æœŸé¸æ“‡å™¨ä½¿ç”¨
                    birthDate: convertDateToYYYY_MM_DD(employee.birthDate || ''),
                    hireDate: convertDateToYYYY_MM_DD(employee.hireDate || ''),
                    children: employee.children || [],
                    languageSkills: employee.languageSkills || [],
                    fixedLanguageSkills: employee.fixedLanguageSkills || {},
                    travelLocations: employee.travelLocations || [],
                    customTravelLocations: employee.customTravelLocations || [],
                    careerDevelopment: employee.careerDevelopment || '',
                    achievementProject: employee.achievementProject || '',
                    healthInfoOptions: employee.healthInfoOptions || [],
                    healthInfoCustom: employee.healthInfoCustom || '',
                    certificationOptions: employee.certificationOptions || [],
                    certificationCustom: employee.certificationCustom || ''
                });
                setCurrentView('edit');
            };

            const filteredEmployees = employees.filter(emp => 
                emp.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                emp.employeeId.toLowerCase().includes(searchTerm.toLowerCase()) ||
                emp.department.toLowerCase().includes(searchTerm.toLowerCase())
            );

            const handleInputChange = (field, value) => {
                setFormData(prev => ({
                    ...prev,
                    [field]: value
                }));
            };

            // å­å¥³ç®¡ç†åŠŸèƒ½
            const addChild = () => {
                setFormData(prev => ({
                    ...prev,
                    children: [...prev.children, {
                        id: Date.now(),
                        age: ''
                    }]
                }));
            };

            const removeChild = (id) => {
                setFormData(prev => ({
                    ...prev,
                    children: prev.children.filter(child => child.id !== id)
                }));
            };

            const updateChild = (id, field, value) => {
                setFormData(prev => ({
                    ...prev,
                    children: prev.children.map(child =>
                        child.id === id ? { ...child, [field]: value } : child
                    )
                }));
            };

            // èªè¨€æŠ€èƒ½ç®¡ç†åŠŸèƒ½ - å›ºå®šèªè¨€
            const updateFixedLanguageSkill = (language, field, value) => {
                setFormData(prev => ({
                    ...prev,
                    fixedLanguageSkills: {
                        ...prev.fixedLanguageSkills,
                        [language]: {
                            ...prev.fixedLanguageSkills?.[language],
                            [field]: value
                        }
                    }
                }));
            };

            // èªè¨€æŠ€èƒ½ç®¡ç†åŠŸèƒ½ - è‡ªè¨‚èªè¨€
            const addLanguageSkill = () => {
                setFormData(prev => ({
                    ...prev,
                    languageSkills: [...prev.languageSkills, {
                        id: Date.now(),
                        language: '',
                        listening: '',
                        speaking: '',
                        reading: '',
                        writing: ''
                    }]
                }));
            };

            const removeLanguageSkill = (id) => {
                setFormData(prev => ({
                    ...prev,
                    languageSkills: prev.languageSkills.filter(skill => skill.id !== id)
                }));
            };

            const updateLanguageSkill = (id, field, value) => {
                setFormData(prev => ({
                    ...prev,
                    languageSkills: prev.languageSkills.map(skill =>
                        skill.id === id ? { ...skill, [field]: value } : skill
                    )
                }));
            };

            // å¥åº·ç‹€æ³ç®¡ç†åŠŸèƒ½
            const handleHealthInfoOptionChange = (option, checked) => {
                setFormData(prev => {
                    let newOptions;
                    
                    if (option === 'ç„¡') {
                        // å¦‚æœé¸æ“‡"ç„¡"ï¼Œå‰‡æ¸…ç©ºå…¶ä»–æ‰€æœ‰é¸é …ï¼Œåªä¿ç•™"ç„¡"
                        if (checked) {
                            newOptions = ['ç„¡'];
                        } else {
                            newOptions = [];
                        }
                    } else {
                        // å¦‚æœé¸æ“‡å…¶ä»–é¸é …ï¼Œå…ˆç§»é™¤"ç„¡"ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
                        const filteredOptions = prev.healthInfoOptions.filter(opt => opt !== 'ç„¡');
                        
                        if (checked) {
                            newOptions = [...filteredOptions, option];
                        } else {
                            newOptions = filteredOptions.filter(opt => opt !== option);
                        }
                    }
                    
                    // æ›´æ–° healthInfo å­—æ®µ
                    let healthInfoText = '';
                    if (newOptions.length > 0) {
                        healthInfoText = newOptions.join(', ');
                        if (prev.healthInfoCustom && !newOptions.includes('ç„¡')) {
                            healthInfoText += ', ' + prev.healthInfoCustom;
                        }
                    } else if (prev.healthInfoCustom) {
                        healthInfoText = prev.healthInfoCustom;
                    }
                    
                    return {
                        ...prev,
                        healthInfoOptions: newOptions,
                        healthInfo: healthInfoText
                    };
                });
            };

            const updateHealthInfoCustom = (value) => {
                setFormData(prev => {
                    // æ›´æ–° healthInfo å­—æ®µ
                    let healthInfoText = '';
                    if (prev.healthInfoOptions.length > 0) {
                        healthInfoText = prev.healthInfoOptions.join(', ');
                        // åªæœ‰åœ¨æ²’æœ‰é¸æ“‡"ç„¡"çš„æƒ…æ³ä¸‹æ‰åŠ å…¥è‡ªè¨‚å…§å®¹
                        if (value && !prev.healthInfoOptions.includes('ç„¡')) {
                            healthInfoText += ', ' + value;
                        }
                    } else if (value) {
                        healthInfoText = value;
                    }
                    
                    return {
                        ...prev,
                        healthInfoCustom: value,
                        healthInfo: healthInfoText
                    };
                });
            };

            // è­‰ç…§ç®¡ç†åŠŸèƒ½
            const handleCertificationOptionChange = (option, checked) => {
                setFormData(prev => {
                    let newOptions;
                    
                    if (option === 'ç„¡') {
                        // å¦‚æœé¸æ“‡"ç„¡"ï¼Œå‰‡æ¸…ç©ºå…¶ä»–æ‰€æœ‰é¸é …ï¼Œåªä¿ç•™"ç„¡"
                        if (checked) {
                            newOptions = ['ç„¡'];
                        } else {
                            newOptions = [];
                        }
                    } else {
                        // å¦‚æœé¸æ“‡å…¶ä»–é¸é …ï¼Œå…ˆç§»é™¤"ç„¡"ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
                        const filteredOptions = prev.certificationOptions.filter(opt => opt !== 'ç„¡');
                        
                        if (checked) {
                            newOptions = [...filteredOptions, option];
                        } else {
                            newOptions = filteredOptions.filter(opt => opt !== option);
                        }
                    }
                    
                    // æ›´æ–° certification å­—æ®µ
                    let certificationText = '';
                    if (newOptions.length > 0) {
                        certificationText = newOptions.join(', ');
                        if (prev.certificationCustom && !newOptions.includes('ç„¡')) {
                            certificationText += ', ' + prev.certificationCustom;
                        }
                    } else if (prev.certificationCustom) {
                        certificationText = prev.certificationCustom;
                    }
                    
                    return {
                        ...prev,
                        certificationOptions: newOptions,
                        certification: certificationText
                    };
                });
            };

            const updateCertificationCustom = (value) => {
                setFormData(prev => {
                    // æ›´æ–° certification å­—æ®µ
                    let certificationText = '';
                    if (prev.certificationOptions.length > 0) {
                        certificationText = prev.certificationOptions.join(', ');
                        // åªæœ‰åœ¨æ²’æœ‰é¸æ“‡"ç„¡"çš„æƒ…æ³ä¸‹æ‰åŠ å…¥è‡ªè¨‚å…§å®¹
                        if (value && !prev.certificationOptions.includes('ç„¡')) {
                            certificationText += ', ' + value;
                        }
                    } else if (value) {
                        certificationText = value;
                    }
                    
                    return {
                        ...prev,
                        certificationCustom: value,
                        certification: certificationText
                    };
                });
            };

            // åœ‹å¤–æ´¾é£åœ°é»ç®¡ç†åŠŸèƒ½
            const handleTravelLocationChange = (location, checked) => {
                setFormData(prev => {
                    if (checked) {
                        // æ–°å¢åœ°é»
                        return {
                            ...prev,
                            travelLocations: [...prev.travelLocations, location]
                        };
                    } else {
                        // ç§»é™¤åœ°é»
                        return {
                            ...prev,
                            travelLocations: prev.travelLocations.filter(loc => loc !== location)
                        };
                    }
                });
            };

            // è‡ªè¨‚åœ‹å¤–æ´¾é£åœ°é»ç®¡ç†
            const addCustomTravelLocation = () => {
                setFormData(prev => ({
                    ...prev,
                    customTravelLocations: [...(prev.customTravelLocations || []), {
                        id: Date.now(),
                        location: ''
                    }]
                }));
            };

            const removeCustomTravelLocation = (id) => {
                setFormData(prev => ({
                    ...prev,
                    customTravelLocations: (prev.customTravelLocations || []).filter(location => location.id !== id)
                }));
            };

            const updateCustomTravelLocation = (id, value) => {
                setFormData(prev => ({
                    ...prev,
                    customTravelLocations: (prev.customTravelLocations || []).map(location =>
                        location.id === id ? { ...location, location: value } : location
                    )
                }));
            };

            const handleExportData = () => {
                if (employees.length === 0) {
                    alert('ç›®å‰æ²’æœ‰å“¡å·¥è³‡æ–™å¯ä»¥åŒ¯å‡º');
                    return;
                }

                const dataToExport = {
                    exportDate: new Date().toISOString(),
                    totalEmployees: employees.length,
                    employees: employees
                };

                const dataStr = JSON.stringify(dataToExport, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                
                const link = document.createElement('a');
                link.href = URL.createObjectURL(dataBlob);
                link.download = `å“¡å·¥è³‡æ–™_${new Date().toLocaleDateString('zh-TW').replace(/\//g, '-')}.json`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                alert(`æˆåŠŸåŒ¯å‡º ${employees.length} ç­†å“¡å·¥è³‡æ–™ï¼`);
            };

            const handleImportData = (event) => {
                const file = event.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const importedData = JSON.parse(e.target.result);
                        
                        if (!importedData.employees || !Array.isArray(importedData.employees)) {
                            alert('æª”æ¡ˆæ ¼å¼ä¸æ­£ç¢º');
                            return;
                        }

                        if (window.confirm(`å³å°‡åŒ¯å…¥ ${importedData.employees.length} ç­†è³‡æ–™ï¼Œæ˜¯å¦ç¹¼çºŒï¼Ÿ`)) {
                            setEmployees(importedData.employees);
                            saveToStorage(importedData.employees);
                            alert(`æˆåŠŸåŒ¯å…¥ ${importedData.employees.length} ç­†å“¡å·¥è³‡æ–™ï¼`);
                        }
                    } catch (error) {
                        alert('æª”æ¡ˆè®€å–å¤±æ•—');
                    }
                };
                reader.readAsText(file);
                event.target.value = '';
            };

            const clearAllData = () => {
                if (window.confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰è³‡æ–™å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸï¼')) {
                    localStorage.removeItem('employeeData');
                    setEmployees([]);
                    alert('æ‰€æœ‰å“¡å·¥è³‡æ–™å·²æ¸…é™¤ï¼');
                }
            };

            if (currentView === 'list') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
                        <div className="max-w-7xl mx-auto space-y-6">
                            <div className="flex justify-between items-center bg-white rounded-lg shadow-lg p-6">
                                <div>
                                    <h1 className="text-3xl font-bold text-gray-800 mb-2">å“¡å·¥è³‡æ–™ç®¡ç†ç³»çµ±</h1>
                                    <p className="text-gray-600">Version 8.0 - å°ˆæ¥­ç‰ˆ</p>
                                </div>
                                <div className="flex gap-3">
                                    <input
                                        type="file"
                                        accept=".json"
                                        onChange={handleImportData}
                                        style={{ display: 'none' }}
                                        id="import-file"
                                    />
                                    <label
                                        htmlFor="import-file"
                                        className="bg-emerald-600 text-white px-4 py-2 rounded-lg cursor-pointer hover:bg-emerald-700 transition-colors duration-200 flex items-center gap-2"
                                    >
                                        ğŸ“ åŒ¯å…¥è³‡æ–™
                                    </label>
                                    <button
                                        onClick={handleExportData}
                                        className="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors duration-200 flex items-center gap-2"
                                    >
                                        ğŸ’¾ åŒ¯å‡ºè³‡æ–™
                                    </button>
                                    <button
                                        onClick={clearAllData}
                                        className="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200 flex items-center gap-2"
                                    >
                                        ğŸ—‘ï¸ æ¸…é™¤è³‡æ–™
                                    </button>
                                    <button
                                        onClick={() => {
                                            resetForm();
                                            setCurrentView('create');
                                        }}
                                        className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center gap-2 font-semibold"
                                    >
                                        â• æ–°å¢å“¡å·¥
                                    </button>
                                </div>
                            </div>

                            <div className="bg-white rounded-lg shadow-lg p-6">
                                <div className="relative mb-4">
                                    <input
                                        type="text"
                                        placeholder="ğŸ” æœå°‹å“¡ç·¨ã€å§“åæˆ–éƒ¨é–€..."
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                    />
                                </div>

                                <div className="bg-gray-50 rounded-lg p-4 mb-4">
                                    <div className="flex justify-between items-center text-sm text-gray-600">
                                        <span>ç¸½è¨ˆå“¡å·¥æ•¸é‡ï¼š<span className="font-semibold text-blue-600">{employees.length}</span> äºº</span>
                                        <span>æœå°‹çµæœï¼š<span className="font-semibold text-green-600">{filteredEmployees.length}</span> äºº</span>
                                    </div>
                                </div>

                                <div className="overflow-hidden rounded-lg border border-gray-200">
                                    <div className="overflow-x-auto">
                                        <table className="min-w-full divide-y divide-gray-200">
                                            <thead className="bg-gray-50">
                                                <tr>
                                                    <th className="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">å“¡ç·¨</th>
                                                    <th className="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">å§“å</th>
                                                    <th className="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">éƒ¨é–€</th>
                                                    <th className="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">è·å‹™</th>
                                                    <th className="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ç•¢æ¥­ç§‘ç³»</th>
                                                    <th className="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">å­å¥³</th>
                                                    <th className="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">åœ‹å¤–æ´¾é£åœ°é»</th>
                                                    <th className="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">æ“ä½œ</th>
                                                </tr>
                                            </thead>
                                            <tbody className="bg-white divide-y divide-gray-200">
                                                {filteredEmployees.map((employee, index) => (
                                                    <tr key={employee.id} className={`hover:bg-blue-50 transition-colors duration-150 ${index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}`}>
                                                        <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{employee.employeeId}</td>
                                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium">{employee.name}</td>
                                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                                                            {employee.department && (
                                                                <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                                                    {employee.department}
                                                                </span>
                                                            )}
                                                        </td>
                                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-700">{employee.position}</td>
                                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                                            {employee.graduationMajor ? (
                                                <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${
                                                    employee.graduationMajor === 'æ–‡å­¸ç›¸é—œ' ? 'bg-pink-100 text-pink-800' :
                                                    employee.graduationMajor === 'æ³•å¾‹ç›¸é—œ' ? 'bg-indigo-100 text-indigo-800' :
                                                    employee.graduationMajor === 'å•†æ¥­ç›¸é—œ' ? 'bg-green-100 text-green-800' :
                                                    employee.graduationMajor === 'ç®¡ç†ç›¸é—œ' ? 'bg-blue-100 text-blue-800' :
                                                    employee.graduationMajor === 'åŒ–å­¸ç›¸é—œ' ? 'bg-orange-100 text-orange-800' :
                                                    employee.graduationMajor === 'å·¥ç¨‹ç›¸é—œ' ? 'bg-gray-100 text-gray-800' :
                                                    employee.graduationMajor === 'è³‡è¨Šç›¸é—œ' ? 'bg-cyan-100 text-cyan-800' :
                                                    'bg-purple-100 text-purple-800'
                                                }`}>
                                                    {employee.graduationMajor === 'å…¶ä»–' && employee.graduationMajorOther ? 
                                                        employee.graduationMajorOther : employee.graduationMajor}
                                                </span>
                                            ) : (
                                                <span className="text-gray-400 text-xs">æœªå¡«å¯«</span>
                                            )}
                                        </td>
                                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                                                            {employee.children && employee.children.length > 0 ? (
                                                                <div className="space-y-1">
                                                                    {employee.children.map((child, idx) => (
                                                                        <span key={idx} className="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800 mr-1">
                                                                            {child.age}
                                                                        </span>
                                                                    ))}
                                                                </div>
                                                            ) : (
                                                                <span className="text-gray-400 text-xs">ç„¡</span>
                                                            )}
                                                        </td>
                                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                                                            {employee.travelWillingness ? (
                                                                <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${
                                                                    employee.travelWillingness === 'é¡˜æ„' ? 'bg-green-100 text-green-800' :
                                                                    employee.travelWillingness === 'è¦–æƒ…æ³' ? 'bg-yellow-100 text-yellow-800' :
                                                                    'bg-red-100 text-red-800'
                                                                }`}>
                                                                    {employee.travelWillingness}
                                                                </span>
                                                            ) : (
                                                                <span className="text-gray-400 text-xs">æœªå¡«å¯«</span>
                                                            )}
                                                        </td>
                                                        <td className="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                                                            <button
                                                                onClick={() => handleEdit(employee)}
                                                                className="text-blue-600 hover:text-blue-900 hover:bg-blue-50 px-3 py-1 rounded transition-colors duration-150"
                                                            >
                                                                âœï¸ ç·¨è¼¯
                                                            </button>
                                                            <button
                                                                onClick={() => handleDelete(employee)}
                                                                className="text-red-600 hover:text-red-900 hover:bg-red-50 px-3 py-1 rounded transition-colors duration-150"
                                                            >
                                                                ğŸ—‘ï¸ åˆªé™¤
                                                            </button>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                    {filteredEmployees.length === 0 && (
                                        <div className="text-center py-12 text-gray-500">
                                            <div className="text-6xl mb-4">ğŸ“‹</div>
                                            <h3 className="text-lg font-medium mb-2">
                                                {searchTerm ? 'æ‰¾ä¸åˆ°ç¬¦åˆæ¢ä»¶çš„å“¡å·¥è³‡æ–™' : 'å°šç„¡å“¡å·¥è³‡æ–™'}
                                            </h3>
                                            <p className="text-sm">
                                                {searchTerm ? 'è«‹å˜—è©¦å…¶ä»–æœå°‹é—œéµå­—' : 'é»æ“Šä¸Šæ–¹ã€Œæ–°å¢å“¡å·¥ã€æŒ‰éˆ•é–‹å§‹å»ºç«‹è³‡æ–™'}
                                            </p>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
                    <div className="max-w-7xl mx-auto space-y-6">
                        <div className="flex justify-between items-center bg-white rounded-lg shadow-lg p-6">
                            <div>
                                <h2 className="text-2xl font-bold text-gray-800">
                                    {currentView === 'create' ? 'âœ¨ æ–°å¢å“¡å·¥è³‡æ–™' : 'âœï¸ ç·¨è¼¯å“¡å·¥è³‡æ–™'}
                                </h2>
                                <p className="text-gray-600 mt-1">è«‹å¡«å¯«å®Œæ•´çš„å“¡å·¥åŸºæœ¬è³‡æ–™</p>
                            </div>
                            <button
                                onClick={() => {
                                    setCurrentView('list');
                                    resetForm();
                                    setSelectedEmployee(null);
                                }}
                                className="bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition-colors duration-200 flex items-center gap-2"
                            >
                                âŒ å–æ¶ˆ
                            </button>
                        </div>

                        <div className="bg-white rounded-lg shadow-lg p-8 space-y-10">
                            <div>
                                <h3 className="text-xl font-semibold text-gray-800 mb-6 flex items-center gap-3 border-b border-gray-200 pb-3">
                                    ğŸ‘¤ ä¸€ã€å€‹äººåŸºæœ¬è³‡æ–™
                                </h3>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">å“¡ç·¨ <span className="text-red-500">*</span></label>
                                        <input
                                            type="text"
                                            value={formData.employeeId}
                                            onChange={(e) => handleInputChange('employeeId', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            required
                                            placeholder="è«‹è¼¸å…¥å“¡å·¥ç·¨è™Ÿ"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">å§“å <span className="text-red-500">*</span></label>
                                        <input
                                            type="text"
                                            value={formData.name}
                                            onChange={(e) => handleInputChange('name', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            required
                                            placeholder="è«‹è¼¸å…¥å§“å"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">éƒ¨é–€ <span className="text-red-500">*</span></label>
                                        <select
                                            value={formData.department}
                                            onChange={(e) => handleInputChange('department', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            required
                                        >
                                            <option value="">è«‹é¸æ“‡éƒ¨é–€</option>
                                            <option value="ç¸½å…¬å¸">ç¸½å…¬å¸</option>
                                            <option value="ç¸½ç®¡ç†è™•">ç¸½ç®¡ç†è™•</option>
                                            <option value="è£½é€ éƒ¨">è£½é€ éƒ¨</option>
                                            <option value="å„²é‹ç’°å®‰">å„²é‹ç’°å®‰</option>
                                            <option value="å¡—é–‹è™•">å¡—é–‹è™•</option>
                                            <option value="å“ä¿éƒ¨">å“ä¿éƒ¨</option>
                                            <option value="é‹¼æå°ä¸­">é‹¼æå°ä¸­</option>
                                            <option value="é‹¼æå°åŒ—">é‹¼æå°åŒ—</option>
                                            <option value="é‹¼æé«˜é›„">é‹¼æé«˜é›„</option>
                                            <option value="æ··å‡åœŸè™•">æ··å‡åœŸè™•</option>
                                            <option value="ç‰¹å·¥è™•">ç‰¹å·¥è™•</option>
                                            <option value="è£½é€ å®˜ç”°">è£½é€ å®˜ç”°</option>
                                            <option value="å®˜ç”°é å¡—">å®˜ç”°é å¡—</option>
                                            <option value="ä¸­æ§‹å®˜ç”°">ä¸­æ§‹å®˜ç”°</option>
                                            <option value="æŸ³ç‡Ÿ">æŸ³ç‡Ÿ</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">è·å‹™ <span className="text-red-500">*</span></label>
                                        <input
                                            type="text"
                                            value={formData.position}
                                            onChange={(e) => handleInputChange('position', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            placeholder="è«‹è¼¸å…¥è·å‹™"
                                            required
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">æ€§åˆ¥ <span className="text-red-500">*</span></label>
                                        <select
                                            value={formData.gender}
                                            onChange={(e) => handleInputChange('gender', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            required
                                        >
                                            <option value="">è«‹é¸æ“‡</option>
                                            <option value="ç”·">ç”·</option>
                                            <option value="å¥³">å¥³</option>
                                            <option value="å…¶ä»–">å…¶ä»–</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">å‡ºç”Ÿæ—¥æœŸ <span className="text-red-500">*</span></label>
                                        <input
                                            type="date"
                                            value={formData.birthDate}
                                            onChange={(e) => handleInputChange('birthDate', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            min="1900-01-01"
                                            max={new Date().toISOString().split('T')[0]}
                                            required
                                        />
                                        <div className="text-xs text-gray-500 mt-1">â° å¯é¸æ“‡ç¯„åœï¼š1900å¹´è‡³ä»Šå¤©ï¼Œç³»çµ±å°‡è‡ªå‹•è½‰æ›ç‚ºYYYYMMDDæ ¼å¼å„²å­˜</div>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">åˆ°è·æ—¥ <span className="text-red-500">*</span></label>
                                        <input
                                            type="date"
                                            value={formData.hireDate}
                                            onChange={(e) => handleInputChange('hireDate', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            min="1900-01-01"
                                            max={(() => {
                                                const today = new Date();
                                                const futureDate = new Date(today.getFullYear() + 1, today.getMonth(), today.getDate());
                                                return futureDate.toISOString().split('T')[0];
                                            })()}
                                            required
                                        />
                                        <div className="text-xs text-gray-500 mt-1">â° å¯é¸æ“‡ç¯„åœï¼š1900å¹´è‡³æ˜å¹´ä»Šæ—¥ï¼Œç³»çµ±å°‡è‡ªå‹•è½‰æ›ç‚ºYYYYMMDDæ ¼å¼å„²å­˜</div>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">å©šå§»ç‹€æ³ <span className="text-red-500">*</span></label>
                                        <select
                                            value={formData.maritalStatus}
                                            onChange={(e) => handleInputChange('maritalStatus', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            required
                                        >
                                            <option value="">è«‹é¸æ“‡</option>
                                            <option value="å·²å©š">å·²å©š</option>
                                            <option value="æœªå©š">æœªå©š</option>
                                            <option value="å…¶ä»–">å…¶ä»–</option>
                                        </select>
                                    </div>
                                </div>
                                
                                {/* å­å¥³è³‡æ–™å€å¡Š */}
                                <div className="mt-8">
                                    <div className="flex justify-between items-center mb-4">
                                        <label className="block text-sm font-medium text-gray-700">å­å¥³è³‡æ–™ (é¸å¡«)</label>
                                        <button
                                            type="button"
                                            onClick={addChild}
                                            className="bg-green-600 text-white px-3 py-1 rounded-lg hover:bg-green-700 transition-colors duration-200 text-sm flex items-center gap-1"
                                        >
                                            â• æ–°å¢å­å¥³
                                        </button>
                                    </div>
                                    <div className="space-y-4">
                                        {formData.children.map((child) => (
                                            <div key={child.id} className="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                                <div className="grid grid-cols-1 md:grid-cols-6 gap-3 items-center">
                                                    <div className="md:col-span-5">
                                                        <label className="block text-xs font-medium text-gray-600 mb-1">å­å¥³å¹´é½¡</label>
                                                        <select
                                                            value={child.age}
                                                            onChange={(e) => updateChild(child.id, 'age', e.target.value)}
                                                            className="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500"
                                                        >
                                                            <option value="">è«‹é¸æ“‡å¹´é½¡</option>
                                                            <option value="7æ­²ä»¥ä¸‹">7æ­²ä»¥ä¸‹</option>
                                                            <option value="7-12æ­²">7-12æ­²</option>
                                                            <option value="13-18æ­²">13-18æ­²</option>
                                                            <option value="18æ­²ä»¥ä¸Š">18æ­²ä»¥ä¸Š</option>
                                                        </select>
                                                    </div>
                                                    <div className="md:col-span-1 flex justify-end">
                                                        <button
                                                            type="button"
                                                            onClick={() => removeChild(child.id)}
                                                            className="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition-colors duration-200 text-sm"
                                                        >
                                                            ğŸ—‘ï¸
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                        {formData.children.length === 0 && (
                                            <div className="text-center py-8 text-gray-500 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300">
                                                <div className="text-4xl mb-2">ğŸ‘¶</div>
                                                <p className="text-sm">å°šæœªæ–°å¢ä»»ä½•å­å¥³è³‡æ–™</p>
                                                <p className="text-xs mt-1">é»æ“Šä¸Šæ–¹ã€Œæ–°å¢å­å¥³ã€æŒ‰éˆ•é–‹å§‹æ–°å¢</p>
                                            </div>
                                        )}
                                    </div>
                                </div>

                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">èº«ä»½åˆ¥ <span className="text-red-500">*</span></label>
                                        <select
                                            value={formData.nationality}
                                            onChange={(e) => handleInputChange('nationality', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            required
                                        >
                                            <option value="">è«‹é¸æ“‡</option>
                                            <option value="æœ¬åœ‹">æœ¬åœ‹</option>
                                            <option value="å¤–åœ‹">å¤–åœ‹</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">å­¸æ­· <span className="text-red-500">*</span></label>
                                        <select
                                            value={formData.education}
                                            onChange={(e) => handleInputChange('education', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            required
                                        >
                                            <option value="">è«‹é¸æ“‡</option>
                                            <option value="é«˜ä¸­ä»¥ä¸‹">é«˜ä¸­ä»¥ä¸‹</option>
                                            <option value="é«˜ä¸­è·">é«˜ä¸­è·</option>
                                            <option value="å°ˆç§‘">å°ˆç§‘</option>
                                            <option value="å¤§å­¸">å¤§å­¸</option>
                                            <option value="ç¢©å£«">ç¢©å£«</option>
                                            <option value="åšå£«">åšå£«</option>
                                        </select>
                                    </div>
                                </div>
                                
                                {/* ç•¢æ¥­ç§‘ç³»å€å¡Š */}
                                <div className="mt-6">
                                    <div className="md:col-span-2">
                                        <label className="block text-sm font-medium text-gray-700 mb-2">ç•¢æ¥­ç§‘ç³» <span className="text-red-500">*</span></label>
                                        <select
                                            value={formData.graduationMajor}
                                            onChange={(e) => handleInputChange('graduationMajor', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            required
                                        >
                                            <option value="">è«‹é¸æ“‡</option>
                                            <option value="æ–‡å­¸ç›¸é—œ">æ–‡å­¸ç›¸é—œ</option>
                                            <option value="æ³•å¾‹ç›¸é—œ">æ³•å¾‹ç›¸é—œ</option>
                                            <option value="å•†æ¥­ç›¸é—œ">å•†æ¥­ç›¸é—œ</option>
                                            <option value="ç®¡ç†ç›¸é—œ">ç®¡ç†ç›¸é—œ</option>
                                            <option value="åŒ–å­¸ç›¸é—œ">åŒ–å­¸ç›¸é—œ</option>
                                            <option value="å·¥ç¨‹ç›¸é—œ">å·¥ç¨‹ç›¸é—œ</option>
                                            <option value="è³‡è¨Šç›¸é—œ">è³‡è¨Šç›¸é—œ</option>
                                            <option value="å…¶ä»–">å…¶ä»–</option>
                                        </select>
                                        {formData.graduationMajor === 'å…¶ä»–' && (
                                            <div className="mt-3">
                                                <label className="block text-sm font-medium text-gray-700 mb-2">è«‹è¼¸å…¥å…·é«”ç§‘ç³» <span className="text-red-500">*</span></label>
                                                <input
                                                    type="text"
                                                    value={formData.graduationMajorOther}
                                                    onChange={(e) => handleInputChange('graduationMajorOther', e.target.value)}
                                                    className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                                    placeholder="è«‹è¼¸å…¥æ‚¨çš„ç•¢æ¥­ç§‘ç³»"
                                                    required
                                                />
                                            </div>
                                        )}
                                    </div>
                                </div>
                                
                                <div className="mt-6">
                                    <label className="block text-sm font-medium text-gray-700 mb-4">è­‰ç…§ <span className="text-red-500">*</span></label>
                                    
                                    {/* å›ºå®šè­‰ç…§é¸é … - å¤šé¸ */}
                                    <div className="bg-gray-50 rounded-lg p-4 border border-gray-200 mb-4">
                                        <div className="mb-3">
                                            <span className="text-sm font-medium text-gray-600">è­‰ç…§é¡å‹é¸é …</span>
                                            <div className="text-xs text-gray-500 mt-1">ğŸ’¡ è¨»ï¼šé¸æ“‡"ç„¡"æ™‚ç‚ºå–®é¸ï¼Œä¸å¯åŒæ™‚é¸æ“‡å…¶ä»–é¸é …</div>
                                        </div>
                                        <div className="space-y-3">
                                            <label className="flex items-center space-x-3 cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    checked={formData.certificationOptions?.includes('ç„¡') || false}
                                                    onChange={(e) => handleCertificationOptionChange('ç„¡', e.target.checked)}
                                                    className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                                                />
                                                <span className="text-sm text-gray-700 font-medium">ç„¡</span>
                                                <span className="text-xs text-gray-400">(å–®é¸)</span>
                                            </label>
                                        </div>
                                        <div className="grid grid-cols-2 md:grid-cols-3 gap-3 mt-3">
                                            <label className="flex items-center space-x-3 cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    checked={formData.certificationOptions?.includes('å‹å·¥å®‰å…¨') || false}
                                                    onChange={(e) => handleCertificationOptionChange('å‹å·¥å®‰å…¨', e.target.checked)}
                                                    className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                                                    disabled={formData.certificationOptions?.includes('ç„¡')}
                                                />
                                                <span className={`text-sm ${formData.certificationOptions?.includes('ç„¡') ? 'text-gray-400' : 'text-gray-700'}`}>å‹å·¥å®‰å…¨</span>
                                            </label>
                                            <label className="flex items-center space-x-3 cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    checked={formData.certificationOptions?.includes('æœ‰æ©Ÿæº¶åŠ‘') || false}
                                                    onChange={(e) => handleCertificationOptionChange('æœ‰æ©Ÿæº¶åŠ‘', e.target.checked)}
                                                    className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                                                    disabled={formData.certificationOptions?.includes('ç„¡')}
                                                />
                                                <span className={`text-sm ${formData.certificationOptions?.includes('ç„¡') ? 'text-gray-400' : 'text-gray-700'}`}>æœ‰æ©Ÿæº¶åŠ‘</span>
                                            </label>
                                            <label className="flex items-center space-x-3 cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    checked={formData.certificationOptions?.includes('ç‰¹å®šåŒ–å­¸') || false}
                                                    onChange={(e) => handleCertificationOptionChange('ç‰¹å®šåŒ–å­¸', e.target.checked)}
                                                    className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                                                    disabled={formData.certificationOptions?.includes('ç„¡')}
                                                />
                                                <span className={`text-sm ${formData.certificationOptions?.includes('ç„¡') ? 'text-gray-400' : 'text-gray-700'}`}>ç‰¹å®šåŒ–å­¸</span>
                                            </label>
                                            <label className="flex items-center space-x-3 cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    checked={formData.certificationOptions?.includes('æ€¥æ•‘äººå“¡') || false}
                                                    onChange={(e) => handleCertificationOptionChange('æ€¥æ•‘äººå“¡', e.target.checked)}
                                                    className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                                                    disabled={formData.certificationOptions?.includes('ç„¡')}
                                                />
                                                <span className={`text-sm ${formData.certificationOptions?.includes('ç„¡') ? 'text-gray-400' : 'text-gray-700'}`}>æ€¥æ•‘äººå“¡</span>
                                            </label>
                                            <label className="flex items-center space-x-3 cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    checked={formData.certificationOptions?.includes('æ–½å·¥æ¶ä½œæ¥­') || false}
                                                    onChange={(e) => handleCertificationOptionChange('æ–½å·¥æ¶ä½œæ¥­', e.target.checked)}
                                                    className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                                                    disabled={formData.certificationOptions?.includes('ç„¡')}
                                                />
                                                <span className={`text-sm ${formData.certificationOptions?.includes('ç„¡') ? 'text-gray-400' : 'text-gray-700'}`}>æ–½å·¥æ¶ä½œæ¥­</span>
                                            </label>
                                            <label className="flex items-center space-x-3 cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    checked={formData.certificationOptions?.includes('ç¼ºæ°§') || false}
                                                    onChange={(e) => handleCertificationOptionChange('ç¼ºæ°§', e.target.checked)}
                                                    className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                                                    disabled={formData.certificationOptions?.includes('ç„¡')}
                                                />
                                                <span className={`text-sm ${formData.certificationOptions?.includes('ç„¡') ? 'text-gray-400' : 'text-gray-700'}`}>ç¼ºæ°§</span>
                                            </label>
                                            <label className="flex items-center space-x-3 cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    checked={formData.certificationOptions?.includes('ç²‰å¡µ') || false}
                                                    onChange={(e) => handleCertificationOptionChange('ç²‰å¡µ', e.target.checked)}
                                                    className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                                                    disabled={formData.certificationOptions?.includes('ç„¡')}
                                                />
                                                <span className={`text-sm ${formData.certificationOptions?.includes('ç„¡') ? 'text-gray-400' : 'text-gray-700'}`}>ç²‰å¡µ</span>
                                            </label>
                                            <label className="flex items-center space-x-3 cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    checked={formData.certificationOptions?.includes('é«˜ç©ºå·¥ä½œè»Š') || false}
                                                    onChange={(e) => handleCertificationOptionChange('é«˜ç©ºå·¥ä½œè»Š', e.target.checked)}
                                                    className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                                                    disabled={formData.certificationOptions?.includes('ç„¡')}
                                                />
                                                <span className={`text-sm ${formData.certificationOptions?.includes('ç„¡') ? 'text-gray-400' : 'text-gray-700'}`}>é«˜ç©ºå·¥ä½œè»Š</span>
                                            </label>
                                        </div>
                                    </div>

                                    {/* å…¶ä»–è­‰ç…§è‡ªè¨‚è¼¸å…¥ */}
                                    <div className="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                        <div className="mb-3">
                                            <span className="text-sm font-medium text-gray-600">å…¶ä»–è­‰ç…§</span>
                                            {formData.certificationOptions?.includes('ç„¡') && (
                                                <div className="text-xs text-orange-600 mt-1">é¸æ“‡"ç„¡"æ™‚ä¸å¯å¡«å¯«å…¶ä»–è­‰ç…§</div>
                                            )}
                                        </div>
                                        <textarea
                                            value={formData.certificationCustom || ''}
                                            onChange={(e) => updateCertificationCustom(e.target.value)}
                                            className={`w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${
                                                formData.certificationOptions?.includes('ç„¡') ? 'bg-gray-200 cursor-not-allowed' : ''
                                            }`}
                                            rows={3}
                                            placeholder={formData.certificationOptions?.includes('ç„¡') ? 
                                                "å·²é¸æ“‡ã€Œç„¡ã€ï¼Œç„¡æ³•å¡«å¯«å…¶ä»–è­‰ç…§" : 
                                                "å¦‚æœ‰å…¶ä»–è­‰ç…§ï¼Œè«‹åœ¨æ­¤è©³ç´°èªªæ˜..."
                                            }
                                            disabled={formData.certificationOptions?.includes('ç„¡')}
                                        />
                                    </div>
                                </div>
                                
                                {/* èªè¨€èƒ½åŠ›å€å¡Š */}
                                <div className="mt-8">
                                    <label className="block text-sm font-medium text-gray-700 mb-4">èªè¨€èƒ½åŠ› <span className="text-red-500">*</span></label>
                                    
                                    {/* å›ºå®šèªè¨€é¸é … */}
                                    <div className="bg-gray-50 rounded-lg p-4 border border-gray-200 mb-4">
                                        <div className="mb-3">
                                            <span className="text-xs font-medium text-gray-600">å›ºå®šèªè¨€é¸é …</span>
                                        </div>
                                        <div className="space-y-4">
                                            {['ä¸­æ–‡', 'è‹±æ–‡'].map((language) => (
                                                <div key={language} className="border border-gray-200 rounded-lg p-3 bg-white">
                                                    <div className="grid grid-cols-1 md:grid-cols-6 gap-3 items-center">
                                                        <div className="md:col-span-2">
                                                            <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${
                                                                language === 'ä¸­æ–‡' ? 'bg-red-100 text-red-800' :
                                                                language === 'è‹±æ–‡' ? 'bg-blue-100 text-blue-800' :
                                                                'bg-yellow-100 text-yellow-800'
                                                            }`}>
                                                                {language}
                                                            </span>
                                                        </div>
                                                        <div className="md:col-span-4">
                                                            <div className="grid grid-cols-2 gap-2">
                                                                <div>
                                                                    <label className="block text-xs text-gray-500 mb-1">è½</label>
                                                                    <select
                                                                        value={formData.fixedLanguageSkills?.[language]?.listening || ''}
                                                                        onChange={(e) => updateFixedLanguageSkill(language, 'listening', e.target.value)}
                                                                        className="w-full border border-gray-300 rounded px-2 py-1 text-xs focus:ring-2 focus:ring-blue-500"
                                                                    >
                                                                        <option value="">è«‹é¸æ“‡</option>
                                                                        <option value="ç•¥æ‡‚">ç•¥æ‡‚</option>
                                                                        <option value="ä¸­ç­‰">ä¸­ç­‰</option>
                                                                        <option value="ç²¾é€š">ç²¾é€š</option>
                                                                    </select>
                                                                </div>
                                                                <div>
                                                                    <label className="block text-xs text-gray-500 mb-1">èªª</label>
                                                                    <select
                                                                        value={formData.fixedLanguageSkills?.[language]?.speaking || ''}
                                                                        onChange={(e) => updateFixedLanguageSkill(language, 'speaking', e.target.value)}
                                                                        className="w-full border border-gray-300 rounded px-2 py-1 text-xs focus:ring-2 focus:ring-blue-500"
                                                                    >
                                                                        <option value="">è«‹é¸æ“‡</option>
                                                                        <option value="ç•¥æ‡‚">ç•¥æ‡‚</option>
                                                                        <option value="ä¸­ç­‰">ä¸­ç­‰</option>
                                                                        <option value="ç²¾é€š">ç²¾é€š</option>
                                                                    </select>
                                                                </div>
                                                                <div>
                                                                    <label className="block text-xs text-gray-500 mb-1">è®€</label>
                                                                    <select
                                                                        value={formData.fixedLanguageSkills?.[language]?.reading || ''}
                                                                        onChange={(e) => updateFixedLanguageSkill(language, 'reading', e.target.value)}
                                                                        className="w-full border border-gray-300 rounded px-2 py-1 text-xs focus:ring-2 focus:ring-blue-500"
                                                                    >
                                                                        <option value="">è«‹é¸æ“‡</option>
                                                                        <option value="ç•¥æ‡‚">ç•¥æ‡‚</option>
                                                                        <option value="ä¸­ç­‰">ä¸­ç­‰</option>
                                                                        <option value="ç²¾é€š">ç²¾é€š</option>
                                                                    </select>
                                                                </div>
                                                                <div>
                                                                    <label className="block text-xs text-gray-500 mb-1">å¯«</label>
                                                                    <select
                                                                        value={formData.fixedLanguageSkills?.[language]?.writing || ''}
                                                                        onChange={(e) => updateFixedLanguageSkill(language, 'writing', e.target.value)}
                                                                        className="w-full border border-gray-300 rounded px-2 py-1 text-xs focus:ring-2 focus:ring-blue-500"
                                                                    >
                                                                        <option value="">è«‹é¸æ“‡</option>
                                                                        <option value="ç•¥æ‡‚">ç•¥æ‡‚</option>
                                                                        <option value="ä¸­ç­‰">ä¸­ç­‰</option>
                                                                        <option value="ç²¾é€š">ç²¾é€š</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>

                                    {/* å…¶ä»–è‡ªè¨‚èªè¨€ */}
                                    <div className="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                        <div className="flex justify-between items-center mb-3">
                                            <span className="text-xs font-medium text-gray-600">å…¶ä»–èªè¨€</span>
                                            <button
                                                type="button"
                                                onClick={addLanguageSkill}
                                                className="bg-green-600 text-white px-2 py-1 rounded text-xs hover:bg-green-700 transition-colors duration-200 flex items-center gap-1"
                                            >
                                                â• æ–°å¢èªè¨€
                                            </button>
                                        </div>
                                        <div className="space-y-4">
                                            {formData.languageSkills.map((skill) => (
                                                <div key={skill.id} className="border border-gray-200 rounded-lg p-3 bg-white">
                                                    <div className="grid grid-cols-1 md:grid-cols-6 gap-3 items-center">
                                                        <div className="md:col-span-2">
                                                            <label className="block text-xs font-medium text-gray-600 mb-1">èªè¨€åç¨±</label>
                                                            <input
                                                                type="text"
                                                                value={skill.language}
                                                                onChange={(e) => updateLanguageSkill(skill.id, 'language', e.target.value)}
                                                                placeholder="è«‹è¼¸å…¥èªè¨€åç¨±"
                                                                className="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500"
                                                            />
                                                        </div>
                                                        <div className="md:col-span-3">
                                                            <label className="block text-xs font-medium text-gray-600 mb-1">èƒ½åŠ›ç¨‹åº¦</label>
                                                            <div className="grid grid-cols-2 gap-2">
                                                                <div>
                                                                    <label className="block text-xs text-gray-500 mb-1">è½</label>
                                                                    <select
                                                                        value={skill.listening}
                                                                        onChange={(e) => updateLanguageSkill(skill.id, 'listening', e.target.value)}
                                                                        className="w-full border border-gray-300 rounded px-2 py-1 text-xs focus:ring-2 focus:ring-blue-500"
                                                                    >
                                                                        <option value="">è«‹é¸æ“‡</option>
                                                                        <option value="ç•¥æ‡‚">ç•¥æ‡‚</option>
                                                                        <option value="ä¸­ç­‰">ä¸­ç­‰</option>
                                                                        <option value="ç²¾é€š">ç²¾é€š</option>
                                                                    </select>
                                                                </div>
                                                                <div>
                                                                    <label className="block text-xs text-gray-500 mb-1">èªª</label>
                                                                    <select
                                                                        value={skill.speaking}
                                                                        onChange={(e) => updateLanguageSkill(skill.id, 'speaking', e.target.value)}
                                                                        className="w-full border border-gray-300 rounded px-2 py-1 text-xs focus:ring-2 focus:ring-blue-500"
                                                                    >
                                                                        <option value="">è«‹é¸æ“‡</option>
                                                                        <option value="ç•¥æ‡‚">ç•¥æ‡‚</option>
                                                                        <option value="ä¸­ç­‰">ä¸­ç­‰</option>
                                                                        <option value="ç²¾é€š">ç²¾é€š</option>
                                                                    </select>
                                                                </div>
                                                                <div>
                                                                    <label className="block text-xs text-gray-500 mb-1">è®€</label>
                                                                    <select
                                                                        value={skill.reading}
                                                                        onChange={(e) => updateLanguageSkill(skill.id, 'reading', e.target.value)}
                                                                        className="w-full border border-gray-300 rounded px-2 py-1 text-xs focus:ring-2 focus:ring-blue-500"
                                                                    >
                                                                        <option value="">è«‹é¸æ“‡</option>
                                                                        <option value="ç•¥æ‡‚">ç•¥æ‡‚</option>
                                                                        <option value="ä¸­ç­‰">ä¸­ç­‰</option>
                                                                        <option value="ç²¾é€š">ç²¾é€š</option>
                                                                    </select>
                                                                </div>
                                                                <div>
                                                                    <label className="block text-xs text-gray-500 mb-1">å¯«</label>
                                                                    <select
                                                                        value={skill.writing}
                                                                        onChange={(e) => updateLanguageSkill(skill.id, 'writing', e.target.value)}
                                                                        className="w-full border border-gray-300 rounded px-2 py-1 text-xs focus:ring-2 focus:ring-blue-500"
                                                                    >
                                                                        <option value="">è«‹é¸æ“‡</option>
                                                                        <option value="ç•¥æ‡‚">ç•¥æ‡‚</option>
                                                                        <option value="ä¸­ç­‰">ä¸­ç­‰</option>
                                                                        <option value="ç²¾é€š">ç²¾é€š</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div className="md:col-span-1 flex justify-end">
                                                            <button
                                                                type="button"
                                                                onClick={() => removeLanguageSkill(skill.id)}
                                                                className="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition-colors duration-200 text-sm"
                                                            >
                                                                ğŸ—‘ï¸
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                            {formData.languageSkills.length === 0 && (
                                                <div className="text-center py-4 text-gray-400 text-xs">
                                                    <div className="text-2xl mb-1">ğŸ—£ï¸</div>
                                                    <p>å°šæœªæ–°å¢å…¶ä»–èªè¨€</p>
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <h3 className="text-xl font-semibold text-gray-800 mb-6 flex items-center gap-3 border-b border-gray-200 pb-3">
                                    ğŸ’¼ äºŒã€åœ‹å¤–æ´¾é£æ„é¡˜
                                </h3>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">åœ‹å¤–æ´¾é£æ„é¡˜ <span className="text-red-500">*</span></label>
                                        <select
                                            value={formData.travelWillingness}
                                            onChange={(e) => handleInputChange('travelWillingness', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            required
                                        >
                                            <option value="">è«‹é¸æ“‡</option>
                                            <option value="é¡˜æ„">é¡˜æ„</option>
                                            <option value="è¦–æƒ…æ³">è¦–æƒ…æ³</option>
                                            <option value="ç„¡æ³•">ç„¡æ³•</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">ç›®å‰å·¥ä½œåœ°é» <span className="text-red-500">*</span></label>
                                        <input
                                            type="text"
                                            value={formData.workLocation}
                                            onChange={(e) => handleInputChange('workLocation', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            placeholder="è«‹è¼¸å…¥ç›®å‰å·¥ä½œåœ°é»"
                                            required
                                        />
                                    </div>
                                    
                                    {/* å¤–æ´¾åœ°é»é¸æ“‡ - åªæœ‰åœ¨åœ‹å¤–æ´¾é£æ„é¡˜ä¸æ˜¯ã€Œç„¡æ³•ã€æ™‚æ‰é¡¯ç¤º */}
                                    {formData.travelWillingness && formData.travelWillingness !== 'ç„¡æ³•' && (
                                        <div className="md:col-span-2">
                                            <label className="block text-sm font-medium text-gray-700 mb-3">åœ‹å¤–æ´¾é£åœ°é»é¸æ“‡ (å¯å¤šé¸)</label>
                                            
                                            {/* å›ºå®šé¸é … */}
                                            <div className="bg-gray-50 rounded-lg p-4 border border-gray-200 mb-4">
                                                <div className="mb-2">
                                                    <span className="text-xs font-medium text-gray-600">å›ºå®šé¸é …</span>
                                                </div>
                                                <div className="space-y-3">
                                                    <label className="flex items-center space-x-3 cursor-pointer">
                                                        <input
                                                            type="checkbox"
                                                            checked={formData.travelLocations.includes('ä¸­åœ‹')}
                                                            onChange={(e) => handleTravelLocationChange('ä¸­åœ‹', e.target.checked)}
                                                            className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                                                        />
                                                        <span className="text-sm text-gray-700 font-medium">ä¸­åœ‹</span>
                                                    </label>
                                                    <label className="flex items-center space-x-3 cursor-pointer">
                                                        <input
                                                            type="checkbox"
                                                            checked={formData.travelLocations.includes('è¶Šå—')}
                                                            onChange={(e) => handleTravelLocationChange('è¶Šå—', e.target.checked)}
                                                            className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                                                        />
                                                        <span className="text-sm text-gray-700 font-medium">è¶Šå—</span>
                                                    </label>
                                                </div>
                                            </div>

                                            {/* å…¶ä»–è‡ªè¨‚é¸é … */}
                                            <div className="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                                <div className="flex justify-between items-center mb-3">
                                                    <span className="text-xs font-medium text-gray-600">å…¶ä»–åœ°é»</span>
                                                    <button
                                                        type="button"
                                                        onClick={addCustomTravelLocation}
                                                        className="bg-green-600 text-white px-2 py-1 rounded text-xs hover:bg-green-700 transition-colors duration-200 flex items-center gap-1"
                                                    >
                                                        â• æ–°å¢
                                                    </button>
                                                </div>
                                                <div className="space-y-3">
                                                    {(formData.customTravelLocations || []).map((customLocation) => (
                                                        <div key={customLocation.id} className="flex items-center space-x-2">
                                                            <input
                                                                type="text"
                                                                value={customLocation.location}
                                                                onChange={(e) => updateCustomTravelLocation(customLocation.id, e.target.value)}
                                                                placeholder="è«‹è¼¸å…¥å…¶ä»–åœ‹å¤–æ´¾é£åœ°é»"
                                                                className="flex-1 border border-gray-300 rounded px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500"
                                                            />
                                                            <button
                                                                type="button"
                                                                onClick={() => removeCustomTravelLocation(customLocation.id)}
                                                                className="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition-colors duration-200 text-xs"
                                                            >
                                                                ğŸ—‘ï¸
                                                            </button>
                                                        </div>
                                                    ))}
                                                    {(!formData.customTravelLocations || formData.customTravelLocations.length === 0) && (
                                                        <div className="text-center py-4 text-gray-400 text-xs">
                                                            <div className="text-2xl mb-1">ğŸŒ</div>
                                                            <p>å°šæœªæ–°å¢å…¶ä»–åœ°é»</p>
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                            
                                            <div className="mt-3 text-xs text-gray-500">
                                                ğŸ’¡ å¯é¸æ“‡å›ºå®šé¸é …æˆ–è‡ªè¡Œæ–°å¢å…¶ä»–åœ‹å¤–æ´¾é£åœ°é»
                                            </div>
                                        </div>
                                    )}

                                    {/* ç•¶é¸æ“‡ã€Œç„¡æ³•ã€åœ‹å¤–æ´¾é£æ™‚é¡¯ç¤ºæç¤ºè¨Šæ¯ */}
                                    {formData.travelWillingness === 'ç„¡æ³•' && (
                                        <div className="md:col-span-2">
                                            <div className="bg-gray-100 rounded-lg p-4 border border-gray-300">
                                                <div className="flex items-center gap-3 text-gray-600">
                                                    <div className="text-2xl">â„¹ï¸</div>
                                                    <div>
                                                        <p className="text-sm font-medium">æ‚¨é¸æ“‡äº†ã€Œç„¡æ³•ã€åœ‹å¤–æ´¾é£</p>
                                                        <p className="text-xs text-gray-500 mt-1">å› æ­¤ç„¡éœ€é¸æ“‡åœ‹å¤–æ´¾é£åœ°é»</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    )}
                                </div>
                            </div>

                            <div>
                                <h3 className="text-xl font-semibold text-gray-800 mb-6 flex items-center gap-3 border-b border-gray-200 pb-3">
                                    ğŸ¯ ä¸‰ã€è·æ¶¯è¦åŠƒ
                                </h3>
                                <div className="space-y-6">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">è·æ¶¯ç™¼å±•æ„å‘ <span className="text-red-500">*</span></label>
                                        <select
                                            value={formData.careerDevelopment}
                                            onChange={(e) => handleInputChange('careerDevelopment', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            required
                                        >
                                            <option value="">è«‹é¸æ“‡</option>
                                            <option value="ä¸æ“…ç®¡ç†ï¼Œå–œå°ˆæ³¨è‡ªå·±å·¥ä½œç¯„ç–‡">ä¸æ“…ç®¡ç†ï¼Œå–œå°ˆæ³¨è‡ªå·±å·¥ä½œç¯„ç–‡</option>
                                            <option value="å–œæ­¡ç®¡ç†è·ï¼Œå¸Œæœ›å¸¶é ˜åœ˜éšŠ">å–œæ­¡ç®¡ç†è·ï¼Œå¸Œæœ›å¸¶é ˜åœ˜éšŠ</option>
                                            <option value="å–œæ­¡æŠ€è¡“è·ï¼Œå¸Œæœ›é‘½ç ”å°ˆæ¥­é ˜åŸŸ">å–œæ­¡æŠ€è¡“è·ï¼Œå¸Œæœ›é‘½ç ”å°ˆæ¥­é ˜åŸŸ</option>
                                            <option value="ç®¡ç†æŠ€è¡“è·å…©è€…çš†å¯ï¼Œä¿æŒé–‹æ”¾">ç®¡ç†æŠ€è¡“è·å…©è€…çš†å¯ï¼Œä¿æŒé–‹æ”¾</option>
                                            <option value="å°šç„¡æ˜ç¢ºæƒ³æ³•">å°šç„¡æ˜ç¢ºæƒ³æ³•</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">å€‹äººçš„è·æ¶¯ç›®æ¨™ <span className="text-red-500">*</span></label>
                                        <select
                                            value={formData.careerGoals}
                                            onChange={(e) => handleInputChange('careerGoals', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            required
                                        >
                                            <option value="">è«‹é¸æ“‡</option>
                                            <option value="æˆç‚ºç®¡ç†äººæ‰">æˆç‚ºç®¡ç†äººæ‰</option>
                                            <option value="æˆç‚ºå°ˆè·äººå“¡(æœ‰è­‰ç…§)">æˆç‚ºå°ˆè·äººå“¡(æœ‰è­‰ç…§)</option>
                                            <option value="æˆç‚ºå°ˆè·äººå“¡(ç„¡è­‰ç…§)">æˆç‚ºå°ˆè·äººå“¡(ç„¡è­‰ç…§)</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">å€‹äººè·æ¶¯ç›®æ¨™èˆ‡é¡˜æ™¯ <span className="text-red-500">*</span></label>
                                        <textarea
                                            value={formData.lifeGoals}
                                            onChange={(e) => handleInputChange('lifeGoals', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            rows={4}
                                            placeholder="è«‹åˆ†äº«æ‚¨çš„å€‹äººè·æ¶¯ç›®æ¨™èˆ‡é¡˜æ™¯..."
                                            required
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">è«‹åˆ†äº«æ‚¨å·¥ä½œä¸Šæœ€æœ‰æˆå°±æ„Ÿçš„å·¥ä½œè¡¨ç¾(ä¸åƒ…é™æ–¼ç›®å‰ç›®å‰å…¬å¸) <span className="text-red-500">*</span></label>
                                        <div className="text-xs text-gray-500 mb-3 bg-blue-50 p-3 rounded-lg">
                                            ğŸ’¡ è«‹æè¿°å°ˆæ¡ˆåç¨±ã€æ‚¨çš„è§’è‰²èˆ‡å…·é«”è²¢ç»ï¼Œè®“æˆ‘å€‘æ›´äº†è§£æ‚¨çš„å·¥ä½œæˆå°±
                                        </div>
                                        <textarea
                                            value={formData.achievementProject}
                                            onChange={(e) => handleInputChange('achievementProject', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            rows={5}
                                            placeholder="ä¾‹å¦‚ï¼š&#10;å°ˆæ¡ˆåç¨±ï¼šå®¢æˆ¶é—œä¿‚ç®¡ç†ç³»çµ±é–‹ç™¼&#10;æˆ‘çš„è§’è‰²ï¼šå‰ç«¯é–‹ç™¼å·¥ç¨‹å¸«&#10;å…·é«”è²¢ç»ï¼šè² è²¬ä½¿ç”¨è€…ä»‹é¢è¨­è¨ˆèˆ‡é–‹ç™¼ï¼Œå°‡ç³»çµ±ä½¿ç”¨ä¾¿åˆ©æ€§æå‡30%ï¼Œç²å¾—å®¢æˆ¶é«˜åº¦å¥½è©•..."
                                            required
                                        />
                                    </div>
                                </div>
                            </div>

                            <div>
                                <h3 className="text-xl font-semibold text-gray-800 mb-6 flex items-center gap-3 border-b border-gray-200 pb-3">
                                    ğŸ“ å››ã€è¯çµ¡è³‡è¨Š
                                </h3>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">æ‰‹æ©Ÿé›»è©± <span className="text-red-500">*</span></label>
                                        <input
                                            type="tel"
                                            value={formData.mobile}
                                            onChange={(e) => handleInputChange('mobile', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            placeholder="è«‹è¼¸å…¥æ‰‹æ©Ÿè™Ÿç¢¼"
                                            required
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">é›»å­éƒµä»¶ <span className="text-red-500">*</span></label>
                                        <input
                                            type="email"
                                            value={formData.email}
                                            onChange={(e) => handleInputChange('email', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            placeholder="è«‹è¼¸å…¥é›»å­éƒµä»¶"
                                            required
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">é€šè¨Šåœ°å€ <span className="text-red-500">*</span></label>
                                        <input
                                            type="text"
                                            value={formData.address}
                                            onChange={(e) => handleInputChange('address', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            placeholder="è«‹è¼¸å…¥é€šè¨Šåœ°å€"
                                            required
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">æˆ¶ç±åœ°å€ <span className="text-red-500">*</span></label>
                                        <input
                                            type="text"
                                            value={formData.residenceAddress}
                                            onChange={(e) => handleInputChange('residenceAddress', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            placeholder="è«‹è¼¸å…¥æˆ¶ç±åœ°å€"
                                            required
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">ç·Šæ€¥è¯çµ¡äººå§“å <span className="text-red-500">*</span></label>
                                        <input
                                            type="text"
                                            value={formData.emergencyContactName}
                                            onChange={(e) => handleInputChange('emergencyContactName', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            placeholder="è«‹è¼¸å…¥ç·Šæ€¥è¯çµ¡äººå§“å"
                                            required
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">ç·Šæ€¥è¯çµ¡äººé—œä¿‚ <span className="text-red-500">*</span></label>
                                        <select
                                            value={formData.emergencyContactRelation}
                                            onChange={(e) => handleInputChange('emergencyContactRelation', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            required
                                        >
                                            <option value="">è«‹é¸æ“‡</option>
                                            <option value="é…å¶">é…å¶</option>
                                            <option value="çˆ¶æ¯">çˆ¶æ¯</option>
                                            <option value="å­å¥³">å­å¥³</option>
                                            <option value="å…¶ä»–">å…¶ä»–</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">ç·Šæ€¥è¯çµ¡äººé›»è©± <span className="text-red-500">*</span></label>
                                        <input
                                            type="tel"
                                            value={formData.emergencyContactPhone}
                                            onChange={(e) => handleInputChange('emergencyContactPhone', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            placeholder="è«‹è¼¸å…¥ç·Šæ€¥è¯çµ¡äººé›»è©±"
                                            required
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">ç·Šæ€¥è¯çµ¡äººå‚™ç”¨é›»è©±</label>
                                        <input
                                            type="tel"
                                            value={formData.emergencyContactBackupPhone}
                                            onChange={(e) => handleInputChange('emergencyContactBackupPhone', e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                            placeholder="è«‹è¼¸å…¥å‚™ç”¨é›»è©±ï¼ˆé¸å¡«ï¼‰"
                                        />
                                    </div>
                                </div>
                            </div>

                            <div>
                                <h3 className="text-xl font-semibold text-gray-800 mb-6 flex items-center gap-3 border-b border-gray-200 pb-3">
                                    ğŸ›¡ï¸ äº”ã€å€‹è³‡å‘ŠçŸ¥èˆ‡åŒæ„
                                </h3>
                                <div className="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-200">
                                    <label className="flex items-start gap-4 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={formData.privacyConsent}
                                            onChange={(e) => handleInputChange('privacyConsent', e.target.checked)}
                                            className="mt-1 h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-all duration-200"
                                            required
                                        />
                                        <div>
                                            <span className="text-sm text-gray-700 leading-relaxed">
                                                æœ¬äººå·²çŸ¥æ‚‰ä¸¦åŒæ„å…¬å¸ä¾å€‹äººè³‡æ–™ä¿è­·æ³•è’é›†ã€è™•ç†åŠåˆ©ç”¨ä¸Šè¿°è³‡æ–™ï¼Œåƒ…ä¾›äººäº‹ç®¡ç†èˆ‡ç¦åˆ©ç”¨é€”ã€‚
                                            </span>
                                            <div className="mt-2">
                                                <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                    å¿…å¡« *
                                                </span>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <div className="flex justify-end space-x-4 pt-6 border-t border-gray-200">
                                <button
                                    onClick={() => {
                                        setCurrentView('list');
                                        resetForm();
                                        setSelectedEmployee(null);
                                    }}
                                    className="bg-gray-500 text-white px-8 py-3 rounded-lg hover:bg-gray-600 transition-colors duration-200 flex items-center gap-2"
                                >
                                    âŒ å–æ¶ˆ
                                </button>
                                <button
                                    onClick={currentView === 'create' ? handleCreate : handleUpdate}
                                    className="bg-gradient-to-r from-blue-600 to-blue-700 text-white px-8 py-3 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 flex items-center gap-2 font-semibold shadow-lg"
                                >
                                    ğŸ’¾ {currentView === 'create' ? 'æ–°å¢å“¡å·¥' : 'æ›´æ–°è³‡æ–™'}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<EmployeeSurveyCRUD />, document.getElementById('root'));
    </script>
</body>
</html>
                                            
